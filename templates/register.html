<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Yantrikom - Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f0f2f5;
        }
        .register-form {
            max-width: 550px;
            margin: 60px auto;
            padding: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .brand-title {
            text-align: center;
            font-weight: bold;
            font-size: 32px;
            color: #007bff;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            margin-bottom: 25px;
            font-size: 18px;
            color: #666;
        }
    </style>
</head>
<body>

<div class="register-form">
    <div class="brand-title">YANTRIKOM</div>
    <div class="subtitle">REGISTER</div>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="alert alert-warning">
            {% for message in messages %}
                {{ message }}
            {% endfor %}
        </div>
    {% endif %}
    {% endwith %}

    <form method="POST" action="/register">
        <div class="mb-3">
            <label for="name" class="form-label">Full Name</label>
            <input type="text" class="form-control" name="name" required>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
            <input type="email" class="form-control" name="email" required>
        </div>

        <div class="mb-3">
            <label for="year" class="form-label">Year</label>
            <select class="form-select" name="year" id="year" onchange="updateSections()" required>
                <option value="">-- Select Year --</option>
                <option value="1">1st Year</option>
                <option value="2">2nd Year</option>
                <option value="3">3rd Year</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="branch" class="form-label">Branch</label>
            <select class="form-select" name="branch" required>
                <option value="">-- Select Branch --</option>
                <option value="CSE">CSE (Core)</option>
                <option value="IT">IT (Core)</option>
                <option value="ECE">ECE (Core)</option>
                <option value="EEE">EEE (Core)</option>
                <option value="ME">ME (Core)</option>
                <option value="CE">CE (Core)</option>
                <option value="AIML">AIML (Elite)</option>
                <option value="DS">DS (Elite)</option>
                <option value="CSBS">CSBS (Elite)</option>
                <option value="CSE-IOT">CSE-IOT (Elite)</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="section" class="form-label">Section</label>
            <select class="form-select" name="section" id="section" required>
                <option value="">-- Select Section --</option>
                <!-- JavaScript will fill the rest -->
            </select>
        </div>

        <div class="mb-3">
            <label for="rollno" class="form-label">Roll Number</label>
            <input type="text" class="form-control" name="rollno" required>
        </div>

        <div class="mb-3">
            <label for="payment" class="form-label">Payment Status</label>
            <select class="form-select" name="payment" required>
                <option value="">-- Select Status --</option>
                <option value="Paid">Paid</option>
                <option value="Unpaid">Unpaid</option>
            </select>
        </div>
        <div class="mb-3 text-center">
    <a href="upi://pay?pa=8826464841@kotak=Rachit&am=1&cu=INR" class="btn btn-success" target="_blank">
        üí≥ Pay ‚Çπ100 via UPI
    </a>
    <small class="d-block mt-2 text-muted">Please complete the payment before submitting the form.</small>
</div>
<div class="mb-3">
    <label for="payment" class="form-label">Payment Reference ID</label>
    <input type="text" class="form-control" name="payment" required>
</div>


        <div class="d-grid">
            <button type="submit" class="btn btn-primary">Register</button>
        </div>
    </form>

    <div class="mt-3 text-center">
        <a href="/users">üîç View Registered Users</a>
    </div>
</div>

<script>
    function updateSections() {
        const year = document.getElementById("year").value;
        const section = document.getElementById("section");

        section.innerHTML = '<option value="">-- Select Section --</option>';

        if (year === "1") {
            const firstYearSections = ["A", "B", "C", "D", "E", "F", "G", "H", "I"];
            firstYearSections.forEach(sec => {
                const opt = document.createElement("option");
                opt.value = sec;
                opt.textContent = sec;
                section.appendChild(opt);
            });
        } else if (year === "2" || year === "3") {
            const upperYearSections = ["A", "B", "C"];
            upperYearSections.forEach(sec => {
                const opt = document.createElement("option");
                opt.value = sec;
                opt.textContent = sec;
                section.appendChild(opt);
            });
        }
    }
</script>

</body>
</html>
